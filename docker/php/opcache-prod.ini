[opcache]
; Production OPcache configuration for maximum performance
; This file is used when OPCACHE_MODE != 'dev' in Dockerfile

; Enable OPcache for CLI and web requests
opcache.enable=1
opcache.enable_cli=1

; Memory configuration
opcache.memory_consumption=256
opcache.interned_strings_buffer=16

; File limits
opcache.max_accelerated_files=20000

; Validation (PRODUCTION: no validation for max speed)
; WARNING: After code deployment, you MUST restart PHP-FPM containers
; to clear OPcache, otherwise old code will continue executing!
opcache.validate_timestamps=0
opcache.revalidate_freq=0

; Save comments for Laravel Reflection/DocBlocks
opcache.save_comments=1

; Performance optimizations
opcache.fast_shutdown=1

; File cache (optional: persist cache across restarts)
opcache.file_cache=/tmp/opcache
opcache.file_cache_only=0
opcache.file_cache_consistency_checks=1

; Optimization level
opcache.optimization_level=0x7FFEBFFF
